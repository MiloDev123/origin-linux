FROM --platform=i386 i386/debian:buster
ARG DEBIAN_FRONTEND=noninteractive
RUN apt-get clean && apt-get update && apt-get -y upgrade && \
    apt-get -y install apt-utils gcc python3 nano unzip ruby nodejs \
    fakeroot dbus base whiptail hexedit patch wamerican ucf manpages \
    file luajit make lua50 dialog curl less cowsay netcat-openbsd sudo && \
    apt-get clean
RUN useradd -m user && echo "user::0:0:::/bin/bash" | chpasswd -e && \
    passwd -d root
COPY --chown=user:user ./examples /home/user/examples
RUN chmod -R +x /home/user/examples/lua
RUN echo "user ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers && \
    echo "root ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers
ENV HOME="/root" TERM="xterm" USER="root" SHELL="/bin/bash" EDITOR="nano" LANG="en_US.UTF-8" LC_ALL="C"
WORKDIR /root/
CMD ["/bin/bash"]
